#!/bin/bash

echo "Comprehensive Network Simulation Script"

# --- 5G Network Simulation Scenarios ---

echo "Simulating High-Speed Urban Area"
tc qdisc add dev eth0 root netem delay 10ms loss 0.1% rate 100mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Medium-Speed Suburban Area"
tc qdisc add dev eth0 root netem delay 20ms loss 0.3% rate 50mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Low-Speed Rural Area"
tc qdisc add dev eth0 root netem delay 30ms loss 0.5% rate 20mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

# --- High Traffic Website Simulation Scenarios ---

echo "Simulating Normal Website Traffic"
tc qdisc add dev eth0 root netem delay 50ms loss 0.1% rate 100mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Traffic During Sale"
tc qdisc add dev eth0 root netem delay 100ms loss 1% rate 50mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Traffic Spike for Global Launch"
tc qdisc add dev eth0 root netem delay 150ms loss 2% rate 30mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

# --- Online Gaming Simulation Scenarios ---

echo "Simulating Local Multiplayer Gaming"
tc qdisc add dev eth0 root netem delay 30ms loss 0.2% rate 20mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating International Multiplayer Gaming"
tc qdisc add dev eth0 root netem delay 100ms loss 0.5% rate 10mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Mobile Gaming on 4G"
tc qdisc add dev eth0 root netem delay 75ms loss 1% rate 5mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

# --- Cloud Services Simulation Scenarios ---

echo "Simulating Cloud Data Transfer - High Bandwidth"
tc qdisc add dev eth0 root netem delay 10ms loss 0.1% rate 100mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Average Cloud Computing Conditions"
tc qdisc add dev eth0 root netem delay 50ms loss 0.5% rate 50mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "Simulating Cloud Gaming in Distributed Services"
tc qdisc add dev eth0 root netem delay 70ms loss 1% rate 20mbit
sleep 1
time bash -c 'swanctl --initiate --child net > /dev/null; swanctl --initiate --child host > /dev/null'
sleep 2
swanctl --terminate --child host > /dev/null
sleep 1
swanctl --terminate --child net > /dev/null
sleep 2
tc qdisc del dev eth0 root

echo "All Network Condition Simulations Completed."
